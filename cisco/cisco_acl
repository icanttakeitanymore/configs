### Общий синтаксис конмманды настройки конструкции стандартного ACL
#Список так же работает строго сверху вниз: если пакет совпал с условием, дальше он не обрабатывается, если никакое из условий не совпадает, пакет просто уничтожается.
#Нельзя разместить более одного списка доступа на интерфейс, на протокол или на направление.
###
access-list номер-списка {deny | permit} отправитель [инвертированная-маскаотправителя]
### пример
router-D(config)#access-list 1 permit 172.16.0.0 0.0.255.255 ;\ разрешает 172.16.0.0/16
router-D(config)#interface gigabitEthernet 0/1
router-D(config-if)#ip access-group 1 out
#В сеть 11.0.0.0/24, находящуюся за интерфейсом gi 0/1 не будут попадать никакие пакеты кроме пакетов из диапазона 172.16.0.0/16
# точнее они не будут из него выходить.
###
##это работает как 
/sbin/iptables -P OUTPUT DROP
/sbin/iptables -A OUTPUT -s 172.16.0.0/16 -i eht1 -j ACCEPT
##
## Расширенные списки доступа
Router(config-ext-nacl) <номер списка от 100 до 199> {permit | deny | remark} protocol source [source-wildcard] [operator operand] [port <порт или название протокола> [established]

    protocol source: какой протокол будем разрешать или закрывать (ICMP, TCP, UDP, IP, OSPF и т.д)
    deny: запретить
    operator:
    A.B.C.D — адрес получателя
    any — любой конечный хост
    eq — только пакеты на этом порте
    gt — только пакеты с большим номером порта
    host — единственный конечный хост
    lt — только пакеты с более низким номером порта
    neq — только пакеты не на данном номере порта
    range — диапазон портов
    port: номер порта (TCP или UDP), можно указать имя
    established: разрешаем прохождение TCP-сегментов, которые являются частью уже созданной TCP-сессии
ip access-list extended permit

router-D(config-ext-nacl)#permit ip 172.16.0.0 0.0.255.255 11.0.0.0 0.0.0.255
router-D(config-if)#ip access-group permit in ;\ если out то пакеты будут прибегать в сеть, а выходить не будут.

#Список так же работает строго сверху вниз: если пакет совпал с условием, дальше он не обрабатывается, если никакое из условий не совпадает, пакет просто уничтожается.
#Нельзя разместить более 1 списка доступа на интерфейс, на протокол, на направление
router-D(config-ext-nacl)#permit tcp 172.16.0.0 0.0.255.255 any eq 80 ;\ проверка ip:port по подсети и вайлдкард
router-D(config-ext-nacl)#permit ip 172.16.0.0 0.0.255.255 any ;\ все остальные пакеты подсети .
или 
router-D(config-ext-nacl)#permit tcp 172.16.0.0 0.0.255.255 any neq 80 ;\ проверка ip:port  идти будут только пакеты не на 80 порт в эту подсеть.
router-D(config-ext-nacl)#permit ip 172.16.0.0 0.0.255.255 any ;\
#Пакет будет проверяться на ip:port, а потом пропускаться.
## применение к интерфейсу

         /-------------------\
         |                   |
       in|out		  out|In
	 \-------------------/
router-D(config-if)#ip access-group Имя Направление.
